---
import Container from '../ui/Container.astro';
import MainNav from '../navigation/MainNav.astro';

const {
  brandLabel = '',
  brandHref = '/',
  pathname = '/',
  sticky = false,
} = Astro.props;

const hasBrandSlot = Astro.slots.has('brand');
const hasActions = Astro.slots.has('actions');
---

<header class:list={['site-header', sticky && 'site-header--sticky']}>
  <Container size="wide" class="site-header__inner">
    <div class="site-header__brand">
      {hasBrandSlot ? (
        <slot name="brand" />
      ) : brandLabel ? (
        <a class="site-header__brand-link" href={brandHref}>{brandLabel}</a>
      ) : null}
    </div>

    <div class="site-header__nav">
      <MainNav pathname={pathname} />
    </div>

    {hasActions && (
      <div class="site-header__actions">
        <slot name="actions" />
      </div>
    )}
  </Container>
</header>

<style>
  .site-header {
    border-bottom: var(--border-thin);
    background: rgba(255, 249, 251, 0.82);
    backdrop-filter: blur(16px);
  }

  .site-header--sticky {
    position: sticky;
    top: 0;
    z-index: 20;
  }

  .site-header__inner {
    display: grid;
    grid-template-columns: auto minmax(0, 1fr) auto;
    align-items: center;
    gap: var(--space-4);
    min-height: 4.75rem;
    padding-block: var(--space-3);
  }

  .site-header__brand-link {
    font-family: var(--font-ui);
    font-size: var(--step-1);
    font-weight: 600;
    text-decoration: none;
    white-space: nowrap;
  }

  .site-header__nav {
    min-width: 0;
    justify-self: end;
    width: min(100%, 44rem);
  }

  .site-header__actions {
    display: flex;
    align-items: center;
    justify-self: end;
  }

  @media (max-width: 52rem) {
    .site-header__inner {
      grid-template-columns: minmax(0, 1fr) auto;
      align-items: start;
      row-gap: var(--space-3);
    }

    .site-header__nav,
    .site-header__actions {
      justify-self: stretch;
    }

    .site-header__nav {
      grid-column: 1 / -1;
      width: 100%;
    }

    .site-header__actions {
      align-self: center;
      justify-self: end;
    }
  }

  @media (max-width: 34rem) {
    .site-header__inner {
      grid-template-columns: 1fr;
    }

    .site-header__actions {
      justify-self: start;
    }
  }
</style>
