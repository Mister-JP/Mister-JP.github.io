---
import '../styles/global.css';
import Header from '../components/layout/Header.astro';
import Footer from '../components/layout/Footer.astro';

const {
  title = 'Portfolio',
  description = '',
  lang = 'en',
  brandLabel = '',
  brandHref = '/',
  footerNote = '',
  footerLinks = [],
  stickyHeader = true,
} = Astro.props;

const currentPath = Astro.url.pathname;
const hasHeaderActions = Astro.slots.has('header-actions');
const hasFooterContent = Astro.slots.has('footer');
---

<!doctype html>
<html lang={lang}>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title}</title>
    {description && <meta name="description" content={description} />}
    <slot name="head" />
  </head>
  <body>
    <a class="skip-link" href="#main-content">Skip to content</a>
    <div class="site-shell">
      <Header
        brandLabel={brandLabel}
        brandHref={brandHref}
        pathname={currentPath}
        sticky={stickyHeader}
      >
        {hasHeaderActions && (
          <div slot="actions">
            <slot name="header-actions" />
          </div>
        )}
      </Header>

      <main id="main-content" class="site-shell__main">
        <slot />
      </main>

      <Footer note={footerNote} links={footerLinks}>
        {hasFooterContent && <slot name="footer" />}
      </Footer>
    </div>
  </body>
</html>

<style>
  .site-shell {
    min-height: 100vh;
    display: grid;
    grid-template-rows: auto 1fr auto;
  }

  .site-shell__main {
    padding-bottom: var(--space-8);
  }

  .skip-link {
    position: absolute;
    left: var(--space-4);
    top: var(--space-4);
    z-index: 30;
    padding: 0.75rem 1rem;
    border-radius: var(--radius-pill);
    background: var(--color-text-primary);
    color: var(--color-surface-base);
    text-decoration: none;
    transform: translateY(-200%);
    transition: transform var(--transition-soft);
  }

  .skip-link:focus {
    transform: translateY(0);
  }
</style>
